<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/shoppingmall/js/jquery-3.6.0.min.js"></script>
</head>
<body>
	<h1>페이지가 서비스를 요청하는 방법</h1>
	
	<h3>a태그로 요청</h3>
	<a href="/shoppingmall/buy">서비스 요청</a>
	<p>URL이 해당 서비스의 URL로 바뀌어서 페이지가 이동</p>
	<p>GET방식으로 요청이 들어감</p>
	<hr>	
	<h3>location.href로 요청</h3>
	<button type="button" id="location-btn">서비스 요청</button>
	<p>URL이 해당 서비스의 URL로 바뀌어서 페이지가 이동</p>
	<p>GET방식으로 요청이 들어감</p>
	<hr>	
	<h3>form+submit 태그로 요청</h3>
	<form action="/shoppingmall/buy" method="post">
		<input type="text" name="userId">
		<input type="text" name="productId">
		<input type="submit" value="서비스 요청">
	</form>
	<p>URL이 해당 서비스의 URL로 바뀌어서 페이지가 이동</p>
	<p>메서드를 지정하여 값을 전달할 수 있다 (GET, POST)</p>
	<p>서버의 응답에 맞는 결과를 보여줄 수 없다</p>
	<hr>
	<h3>ajax로 요청</h3>
	<button type="button" id="ajax-btn">서비스 요청</button>
	<p>URL이 해당 서비스의 URL로 바뀌지 않음</p>
	<p>메서드를 지정하여 값을 전달할 수 있다 (GET, POST)</p>
	<p>서버의 응답에 맞는 결과를 보여줄 수 있다</p>
	<hr>
	

<script type="text/javascript">
	$("#location-btn").on("click", function(){
		location.href="/shoppingmall/buy";
	})
	
	$("#ajax-btn").on("click", function(){
		$.ajax({
			url: "/shoppingmall/buy",
			type: "post",
			data: "userId=Qwe1234&productId=7&paymentMethod=무통장입금",
			success: function(){
				alert("구매되었습니다!");
				location.href="/shoppingmall/shop/product_list.jsp?active=product_list&pageNumber=1";
			},
			error: function(){
				alert("재고 부족");
			}
		})
	})
</script>
</body>
</html>